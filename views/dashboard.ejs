<div class="jumbotron" style="padding:25px;">
  <h5>
    Hallo <strong><%= name %></strong>! Das ist deine Übersicht über aktuelle und vergangene Challenges.
  </h5>    
</div>


        <div class="gallery" style="padding-left: 20%; padding-right: 20%;">
          <div class="card-deck">
              <div class="card" style="width: 18rem; background-color: var(--decent-green)"> 
                  <div class="card-body">
                      <h5 class="card-title"  style="text-align: center;"> 
                        <i class="far fa-check-square"> </i> 
                        <p> Gelöste Challenges </p>
                      </h5>
                      <p class="card-text" style="text-align: center;"><%= result.numSolvedChallenges %></p>
                  </div>
              </div>
                  
              <div class="card" style="width: 18rem; background-color: var(--decent-green);">
                  <div class="card-body">
                      <h5 class="card-title" style="text-align: center;"> 
                        <i class="fa fa-arrow-circle-o-down" aria-hidden="true"> </i> 
                        <p> Eingespartes CO2 </p>
                      </h5>
                      <p class="card-text" style="text-align: center;"><%= result.savedCO2 %> kg</p>
                  </div>
              </div>
              
              <!-- 
              <div class="card" style="width: 18rem; background-color: var(--decent-green);">
                  <div class="card-body">
                      <h5 class="card-title" style="text-align: center;"> 
                        <i class="fa fa-arrow-circle-o-down" aria-hidden="true"> </i> 
                        <p> Eingespartes CO2 </p>
                      </h5>
                      <p class="card-text" style="text-align: center;"><%= result.savedCO2 %> kg</p>
                  </div>
              </div>
              -->
              
              <div class="card" style="width: 18rem; background-color: var(--decent-green);">
                  <div class="card-body">
                      <h5 class="card-title" style="text-align: center;"> 
                        <i class="far fa-heart"> </i> 
                        <p> Lieblingschallenge </p>
                      </h5>
                      <p class="card-text" style="text-align: center;"><%= result.favorite.aname %></p>
                  </div>
              </div>
        </div>
      </div>
       
</div>

<!-- IDEA: only show in the first login situation -->
<!-- <div class="toast fade show" role="alert" aria-live="assertive" aria-atomic="true">
    <div class="toast-header">
      <strong class="mr-auto">Einführungstour</strong>
      <small></small>
      <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="toast-body">
      Das hier ist dein Dashboard. Hier findest du eine Übersicht zu deinen Gruppen sowie aktuellen und vergangenen Challenges.
    </div>
</div> -->

<div>
  <div class="container" >
    <% if (currentChallenges.length > 0) {%>    
    <a class="display-4" style="font-size: 20px;">Laufende Challenges (<%=currentChallenges.length%>/5) </a>
    <% } %>
    <table class="table table-striped table-bordered">
      <% if (currentChallenges.length > 0) {%>      
        <thead class="thead-dark">
          <tr>
            <th>
              <span> 
              Name der Challenge
              </span>
            </th>
            <th>Dein Ziel [Tage]</th>
            <th>Lief von</th>
            <th>Lief bis</th>
            <th>Zur Challenge</th>
          </tr>
        </thead>
        <% } %>
      <tbody>
        <% currentChallenges.forEach(challenge => { %>
        <tr>
          <td><i class="<%=challenge.icon%>"></i> <%= challenge.aname %></td>
          <td><%= challenge.goal %></td>
          <td><%= challenge.date_start %></td>
          <td><%= challenge.date_end %></td>
          <!-- button submits the specific id of challenge i, so when clicked a redirection goes to the challenge-view and load the specific data of challenge i -->
          <td><a href="/challenge-view?ucr_id=<%=challenge.ucr_id%>" class="btn btn-dark" style="background-color:var(--decent-green);">Zur Challenge</a></td>
        </tr>    
        <% }) %>
      </tbody>
    </table>

    <!-- <div class="divider"></div> -->
  </div>
      
  <div class="container">
    <% if (completedChallenges.length > 0) {%>  
    <a class="display-4" style="font-size: 20px;">Vergangene Challenges (<%=completedChallenges.length%>)</a>
    <% } %>
    <table class="table table-striped table-bordered">
      <% if (completedChallenges.length > 0) {%>      
      <thead class="thead-dark">
        <tr>
          <th>
            <span> 
            Name der Challenge
            </span>
          </th>
          <th>Dein Ziel [Tage]</th>
          <th>Lief von</th>
          <th>Lief bis</th>
          <th>Zur Challenge</th>
        </tr>
      </thead>
      <% } %>
      <tbody>
        <% completedChallenges.forEach(challenge => { %>
        <tr>
          <td><i class="<%=challenge.icon%>"></i> <%= challenge.aname %></td>
          <td><%= challenge.goal %></td>
          <td><%= challenge.date_start %></td>
          <td><%= challenge.date_end %></td>
          <!-- button submits the specific id of challenge i, so when clicked a redirection goes to the challenge-view and load the specific data of challenge i -->
          <td><a href="/challenge-view?ucr_id=<%=challenge.ucr_id%>" class="btn btn-dark" style="background-color:var(--decent-green);">Zur Challenge</a></td>
        </tr>    
        <% }) %>
      </tbody>
    </table>
  </div>
</div>